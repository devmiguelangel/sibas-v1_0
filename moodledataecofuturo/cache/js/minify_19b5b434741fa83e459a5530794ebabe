var quiz_edit={};function quiz_edit_init(){var randomquestiondialog=YAHOO.util.Dom.get('randomquestiondialog');if(randomquestiondialog){YAHOO.util.Dom.get(document.body).appendChild(randomquestiondialog);}
quiz_edit.randomquestiondialog=new YAHOO.widget.Dialog('randomquestiondialog',{modal:true,width:'100%',iframe:true,zIndex:1000,fixedcenter:true,visible:false,close:true,constraintoviewport:true,postmethod:'form'});quiz_edit.randomquestiondialog.render();var div=document.getElementById('randomquestiondialog');if(div){div.style.display='block';}
YAHOO.util.Event.addListener(quiz_edit_config.dialoglisteners,'click',function(e){var addrandombutton=YAHOO.util.Event.getTarget(e);var addpagehidden=YAHOO.util.Dom.getElementsByClassName('addonpage_formelement','input',addrandombutton.form);document.getElementById('rform_qpage').value=addpagehidden[0].value;quiz_edit.randomquestiondialog.show();YAHOO.util.Event.stopEvent(e);});quiz_edit.randomquestiondialog.cfg.setProperty('keylisteners',[new YAHOO.util.KeyListener(document,{keys:[27]},function(types,args,obj){quiz_edit.randomquestiondialog.hide();})]);YAHOO.util.Event.addListener('id_cancel','click',function(e){quiz_edit.randomquestiondialog.hide();YAHOO.util.Event.preventDefault(e);});YAHOO.util.Event.addListener('id_existingcategory','click',quiz_yui_workaround);YAHOO.util.Event.addListener('id_newcategory','click',quiz_yui_workaround);quiz_edit.repaginatedialog=new YAHOO.widget.Dialog('repaginatedialog',{modal:true,width:'30em',iframe:true,zIndex:1000,context:['repaginatecommand','tr','br',['beforeShow']],visible:false,close:true,constraintoviewport:true,postmethod:'form'});quiz_edit.repaginatedialog.render();quiz_edit.randomquestiondialog.render();var div=document.getElementById('repaginatedialog');if(div){div.style.display='block';}
YAHOO.util.Event.addListener('repaginatecommand','click',function(){quiz_edit.repaginatedialog.show();});YAHOO.widget.Overlay.windowResizeEvent.subscribe(function(){quiz_edit.repaginatedialog.cfg.setProperty('context',['repaginatecommand','tr','br',['beforeShow']]);});quiz_edit.repaginatedialog.cfg.setProperty('keylisteners',[new YAHOO.util.KeyListener(document,{keys:[27]},function(types,args,obj){quiz_edit.repaginatedialog.hide();})]);var elementcauseinglayoutproblem=document.getElementById('_yuiResizeMonitor');if(elementcauseinglayoutproblem){elementcauseinglayoutproblem.style.left='0px';}}
function quiz_yui_workaround(e){var submitbutton=YAHOO.util.Event.getTarget(e);var input=document.createElement('input');input.type='hidden';input.name=submitbutton.name;input.value=1;submitbutton.form.appendChild(input);}
function quiz_settings_init(){var repaginatecheckbox=document.getElementById('id_repaginatenow');if(!repaginatecheckbox){return;}
var qppselect=document.getElementById('id_questionsperpage');var qppinitialvalue=qppselect.value;YAHOO.util.Event.addListener([qppselect,'id_shufflequestions'],'change',function(){setTimeout(function(){if(!repaginatecheckbox.disabled){repaginatecheckbox.checked=qppselect.value!=qppinitialvalue;}},50);});}
function quiz_edit_generic_init(){switch(document.body.id){case'page-mod-quiz-edit':quiz_edit_init();break;case'page-mod-quiz-mod':quiz_settings_init();}}
YAHOO.util.Event.onDOMReady(quiz_edit_generic_init);